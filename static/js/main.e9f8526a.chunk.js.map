{"version":3,"sources":["components/page.js","components/profilepic.js","components/pill.js","components/filter.js","components/sidebar.js","components/block.js","components/main.js","containers/profile.js","profile.js","index.js"],"names":["_this$props","this","props","sidebar","children","react_default","a","createElement","Wrapper","page_Sidebar","page_Main","PureComponent","styled","div","_templateObject","Sidebar","aside","_templateObject2","Main","main","_templateObject3","img","attrs","_ref","src","url","profilepic_templateObject","span","highlightColor","theme","primary","pill_templateObject","_ref2","selected","_ref3","tags","actives","onSelect","Fragment","map","tag","pill","key","includes","onClick","_this$props$profile","profile","description","pictureUrl","displayName","posts","filters","toggleFilter","uniq","flatten","i","profilepic","length","filter_default","Array","from","Component","Block","id","title","subtitle","startDate","endDate","duration","Box","concat","react_markdown_default","source","className","block_templateObject","extractData","data","_this","response","group","groupBy","filter","items","intersection","forIn","push","main_Blocks","Object","assign","Blocks","main_Masonry","brakePoints","item","idx","block_Block","Masonry","main_templateObject","main_templateObject2","_this2","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","columns","onResize","bind","assertThisInitialized","window","addEventListener","w","reduceRight","p","c","getColumns","refs","offsetWidth","setState","col","numC","reduce","MasonryWrapper","ref","mapChildren","ci","child","main_templateObject3","ProfileContainer","newSet","Set","has","delete","add","react_apollo_browser_umd","query","isLoading","loading","error","console","log","parseProfile","picture","name","rest","objectWithoutProperties","objectSpread","category","current","parseDate","calcDuration","_ref4","start","end","isCurrent","distanceInWordsToNow","Date","distanceInWords","date","DateTime","fromISO","toLocaleString","month","year","gql","profile_templateObject","ProfilePage","profile_ProfileContainer","Loading","page_default","sidebar_Sidebar","main_Main","h1","src_profile_templateObject","LuxonSettings","defaultLocale","client","ApolloClient","uri","rootElement","document","getElementById","ReactDOM","render","styled_components_browser_esm","secondary","profile_ProfilePage"],"mappings":"8iCAIW,IAAAA,EACuBC,KAAKC,MAA3BC,EADDH,EACCG,QAASC,EADVJ,EACUI,SACjB,OACEC,EAAAC,EAAAC,cAACC,EAAD,KACEH,EAAAC,EAAAC,cAACE,EAAD,KAAUN,GACVE,EAAAC,EAAAC,cAACG,EAAD,KAAON,WANcO,iBAYvBH,EAAUI,IAAOC,IAAVC,KAqBPC,EAAUH,IAAOI,MAAVC,KAIPC,EAAON,IAAOO,KAAVC,mLCtCKR,UAAOS,IAAIC,MAAM,SAAAC,GAAA,MAAc,CAC5CC,IAD8BD,EAAGE,KACrB,oBADCb,CAAfc,iWCAed,UAAOe,KAAKL,MAAM,SAAAC,GAAA,MAA6B,CAC5DK,eAD+BL,EAAGM,MAASC,UAA9BlB,CAAfmB,IASkB,SAAAC,GAAA,IAAGC,EAAHD,EAAGC,SAAUL,EAAbI,EAAaJ,eAAb,OACbK,EAAkCL,EAAvB,sBACL,SAAAM,GAAA,IAAGD,EAAHC,EAAGD,SAAUL,EAAbM,EAAaN,eAAb,OACNK,EAAgCL,EAArB,wMCVL,IAAA5B,EAC6BC,KAAKC,MAAjCiC,EADDnC,EACCmC,KAAMC,EADPpC,EACOoC,QAASC,EADhBrC,EACgBqC,SACvB,OACEhC,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgC,SAAA,KACGH,EAAKI,IAAI,SAAAC,GAAG,OACXnC,EAAAC,EAAAC,cAACkC,EAAD,CACEC,IAAKF,EACLP,SAAUG,EAAQO,SAASH,GAC3BI,QAAS,kBAAMP,EAASG,KAEvBA,aAXgB7B,iBCGRI,mLACV,IAAAf,EAKHC,KAAKC,MALF2C,EAAA7C,EAEL8C,QAAWC,EAFNF,EAEME,YAAaC,EAFnBH,EAEmBG,WAAYC,EAF/BJ,EAE+BI,YAAaC,EAF5CL,EAE4CK,MACjDC,EAHKnD,EAGLmD,QACAC,EAJKpD,EAILoD,aAGIjB,EAAOkB,YAAKC,YAAQJ,EAAMX,IAAI,SAAAgB,GAAC,OAAIA,EAAEpB,MAAQ,OAEnD,OACE9B,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgC,SAAA,KACEjC,EAAAC,EAAAC,cAAA,cACEF,EAAAC,EAAAC,cAACiD,EAAD,CAAY/B,IAAKuB,IACjB3C,EAAAC,EAAAC,cAAA,+BACAF,EAAAC,EAAAC,cAAA,UAAK0C,IAGP5C,EAAAC,EAAAC,cAAA,WAEAF,EAAAC,EAAAC,cAAA,SAAIwC,GAEJ1C,EAAAC,EAAAC,cAAA,aAEE4B,EAAKsB,QAGLpD,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgC,SAAA,KACEjC,EAAAC,EAAAC,cAAA,oBACSF,EAAAC,EAAAC,cAAA,iCAGTF,EAAAC,EAAAC,cAACmD,EAAD,CACEvB,KAAMA,EACNC,QAASuB,MAAMC,KAAKT,GACpBd,SAAUe,aAnCaS,wXCAhBC,mLACV,IAAA9D,EAUHC,KAAKC,MARP6D,EAFK/D,EAEL+D,GACAC,EAHKhE,EAGLgE,MACAC,EAJKjE,EAILiE,SACAC,EALKlE,EAKLkE,UACAC,EANKnE,EAMLmE,QACAC,EAPKpE,EAOLoE,SACArB,EARK/C,EAQL+C,YACAZ,EATKnC,EASLmC,KAEF,OACE9B,EAAAC,EAAAC,cAAC8D,EAAD,KACEhE,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,aAAA+D,OAAQJ,EAAR,OAAAI,OAAuBH,EAAvB,MAAAG,OAAmCF,EAAnC,MACCJ,GAEH3D,EAAAC,EAAAC,cAAA,UAAK0D,GACL5D,EAAAC,EAAAC,cAACgE,EAAAjE,EAAD,CAAekE,OAAQzB,KACrBZ,GAAQ,IAAII,IAAI,SAAAC,GAAG,OACnBnC,EAAAC,EAAAC,cAACkC,EAAD,CAAMgC,UAAU,QAAQ/B,IAAG,OAAA4B,OAASP,EAAT,KAAAO,OAAe9B,IACvCA,aAtBsB7B,iBA8B7B0D,EAAMzD,IAAOC,IAAV6D,wyBC9BYxD,6MACnByD,YAAc,SAAAC,GAAQ,IACZzB,EAAY0B,EAAK3E,MAAjBiD,QACJ2B,EAAW,GACXC,EAAQC,YACVJ,EAAKK,OAAO,SAAA1D,GAAc,IAAXY,EAAWZ,EAAXY,KACT+C,EAAQvB,MAAMC,KAAKT,GACvB,OAAQ+B,EAAMzB,QAAU0B,YAAahD,EAAM+C,GAAOzB,SAEpD,YAKF,OAHA2B,YAAML,EAAO,SAACG,EAAOlB,GACnBc,EAASO,KAAKhF,EAAAC,EAAAC,cAAC+E,EAADC,OAAAC,OAAA,CAAQ9C,IAAKsB,GAAW,CAAEA,QAAOkB,cAE1CJ,2EAGA,IAEM5B,EACTjD,KAAKC,MADP4C,QAAWI,MAEb,OAAOjD,KAAK0E,YAAYzB,UArBMW,aAyB5B4B,EAAS,SAAAzD,GAAA,IAAGgC,EAAHhC,EAAGgC,MAAOkB,EAAVlD,EAAUkD,MAAV,OACb7E,EAAAC,EAAAC,cAAAF,EAAAC,EAAAgC,SAAA,KACEjC,EAAAC,EAAAC,cAAA,MAAIkE,UAAU,UAAUT,GACxB3D,EAAAC,EAAAC,cAACmF,EAAD,CAASC,YAAa,CAAC,IAAK,IAAK,MAC9BT,EAAM3C,IAAI,SAACqD,EAAMC,GAAP,OACTxF,EAAAC,EAAAC,cAACuF,EAAUF,QAwBbG,GAlBUnF,IAAOC,IAAVmF,KAUQpF,IAAOC,IAAVoF,iBAShB,SAAAF,EAAY7F,GAAO,IAAAgG,EAAA,OAAAX,OAAAY,EAAA,EAAAZ,CAAAtF,KAAA8F,IACjBG,EAAAX,OAAAa,EAAA,EAAAb,CAAAtF,KAAAsF,OAAAc,EAAA,EAAAd,CAAAQ,GAAAO,KAAArG,KAAMC,KACDqG,MAAQ,CAAEC,QAAS,GACxBN,EAAKO,SAAWP,EAAKO,SAASC,KAAdnB,OAAAoB,EAAA,EAAApB,QAAAoB,EAAA,EAAApB,CAAAW,KAHCA,mFAMjBjG,KAAKwG,WACLG,OAAOC,iBAAiB,SAAU5G,KAAKwG,6CAG9BK,GACT,OACE7G,KAAKC,MAAMyF,YAAYoB,YAAY,SAACC,EAAGC,EAAG1D,GACxC,OAAO0D,EAAIH,EAAIE,EAAIzD,GAClBtD,KAAKC,MAAMyF,YAAYlC,QAAU,qCAKtC,IAAM+C,EAAUvG,KAAKiH,WAAWjH,KAAKkH,KAAKpB,QAAQqB,aAC9CZ,IAAYvG,KAAKsG,MAAMC,SACzBvG,KAAKoH,SAAS,CAAEb,QAASA,0CAO3B,IAFA,IAAIc,EAAM,GACJC,EAAOtH,KAAKsG,MAAMC,QACfjD,EAAI,EAAGA,EAAIgE,EAAMhE,IACxB+D,EAAIjC,KAAK,IAEX,OAAOpF,KAAKC,MAAME,SAASoH,OAAO,SAACR,EAAGC,EAAG1D,GAEvC,OADAyD,EAAEzD,EAAIgE,GAAMlC,KAAK4B,GACVD,GACNM,oCAIH,OACEjH,EAAAC,EAAAC,cAACkH,EAAD,KACEpH,EAAAC,EAAAC,cAAA,OAAKkE,UAAU,UAAUiD,IAAI,WAC1BzH,KAAK0H,cAAcpF,IAAI,SAAC+E,EAAKM,GAC5B,OACEvH,EAAAC,EAAAC,cAAA,OAAKkE,UAAU,SAAS/B,IAAKkF,GAC1BN,EAAI/E,IAAI,SAACsF,EAAOtE,GACf,OAAOlD,EAAAC,EAAAC,cAAA,OAAKmC,IAAKa,GAAIsE,iBA9CjBhE,cAyDhB4D,EAAiB7G,IAAOC,IAAViH,ycC/GCC,eACnB,SAAAA,EAAY7H,GAAO,IAAA2E,EAAA,OAAAU,OAAAY,EAAA,EAAAZ,CAAAtF,KAAA8H,IACjBlD,EAAAU,OAAAa,EAAA,EAAAb,CAAAtF,KAAAsF,OAAAc,EAAA,EAAAd,CAAAwC,GAAAzB,KAAArG,KAAMC,KAMRkD,aAAe,SAAAnB,GACb4C,EAAKwC,SAAS,SAAA9F,GAAiB,IAAd4B,EAAc5B,EAAd4B,QACT6E,EAAS,IAAIC,IAAI9E,GAGvB,OAFI6E,EAAOE,IAAIjG,GAAW+F,EAAOG,OAAOlG,GACnC+F,EAAOI,IAAInG,GACT,CACLkB,QAAS6E,MAXbnD,EAAK0B,MAAQ,CACXpD,QAAS,IAAI8E,KAHEpD,wEAkBV,IAEIzE,EAGPH,KAHFC,MAASE,SACA+C,EAEPlD,KAFFsG,MAASpD,QACTC,EACEnD,KADFmD,aAEF,OACE/C,EAAAC,EAAAC,cAAC8H,EAAA,MAAD,CAAOC,MAAOA,GAAM,6BACjB,SAAAtG,GAAyC,IAA7BuG,EAA6BvG,EAAtCwG,QAAoBC,EAAkBzG,EAAlByG,MAAO7D,EAAW5C,EAAX4C,KAE7B,GAAI6D,EAEF,OADAC,QAAQC,IAAIF,GACLpI,EAAAC,EAAAC,cAAA,oDAET,IAAMuC,EAAU8F,GAAahE,EAAK9B,SAClC,OAAO1C,EAAS,CAAEmI,YAAWE,QAAO3F,UAASK,UAASC,0BAlClBS,aAyCxC+E,GAAe,SAAA9F,GACnB,IAAKA,EAAS,MAAO,GADS,IAGZE,EAIdF,EAJF+F,QAAWpH,IACXyB,EAGEJ,EAHFI,MACMD,EAEJH,EAFFgG,KACGC,EANyBxD,OAAAyD,EAAA,EAAAzD,CAO1BzC,EAP0B,4BAQ9B,OAAOyC,OAAA0D,EAAA,EAAA1D,CAAA,GACFwD,EADL,CAEE9F,cACAD,aACAE,MAAOA,EAAMX,IACX,SAAAL,GAAA,IACqBgH,EADrBhH,EACEgH,SAAYlF,MACZE,EAFFhC,EAEEgC,UACAC,EAHFjC,EAGEiC,QACAgF,EAJFjH,EAIEiH,QACAhH,EALFD,EAKEC,KACG6E,EANLzB,OAAAyD,EAAA,EAAAzD,CAAArD,EAAA,4DAAAqD,OAAA0D,EAAA,EAAA1D,CAAA,GAQKyB,EARL,CASE7C,QAASgF,EAAU,UAAYC,GAAUjF,GACzCD,UAAWkF,GAAUlF,GACrBgF,WACA9E,SAAUiF,GAAanF,EAAWC,EAASgF,GAE3ChH,KAAMA,EAAKI,IAAI,SAAA+G,GAAA,OAAAA,EAAGtF,eAMpBqF,GAAe,SAACE,EAAOC,EAAKC,GAAb,OACnBA,EACIC,+BAAqB,IAAIC,KAAKJ,IAC9BK,0BAAgB,IAAID,KAAKJ,GAAQ,IAAII,KAAKH,KAE1CJ,GAAY,SAAAS,GAAI,OACpBC,IAASC,QAAQF,GAAMG,eAAe,CAAEC,MAAO,OAAQC,KAAM,aAEzD5B,GAAQ,SAAAvE,GAAE,OAAIoG,IAAJC,IAECrG,8ICjFIsG,oLAEjB,OACEhK,EAAAC,EAAAC,cAAC+J,GAAD,KACG,SAAA/I,GAAA,IAAGgH,EAAHhH,EAAGgH,UAAWzF,EAAdvB,EAAcuB,QAASK,EAAvB5B,EAAuB4B,QAASC,EAAhC7B,EAAgC6B,aAAhC,OACCmF,EACElI,EAAAC,EAAAC,cAACgK,GAAD,MAEAlK,EAAAC,EAAAC,cAACiK,EAAD,CAAMrK,QAASE,EAAAC,EAAAC,cAACkK,EAAY,CAAE3H,UAASK,UAASC,kBAC9C/C,EAAAC,EAAAC,cAACmK,EAAS,CAAE5H,UAASK,UAASC,2BATHzC,iBAkBnC4J,GAAU3J,IAAO+J,GAAGrJ,MAAM,iBAAO,CACrClB,SAAU,eADIQ,CAAHgK,sBChBbC,KAAcC,cAAgB,KAE9B,IAAMC,GAAS,IAAIC,IAAa,CAC9BC,IAAK,8CAQDC,GAAcC,SAASC,eAAe,QAC5CC,IAASC,OACPjL,EAAAC,EAAAC,cAAC8H,EAAA,eAAD,CAAgB0C,OAAQA,IACtB1K,EAAAC,EAAAC,cAACgL,EAAA,EAAD,CAAe1J,MARL,CACZC,QAAS,mBACT0J,UAAW,sBAOPnL,EAAAC,EAAAC,cAACkL,GAAD,QAGJP","file":"static/js/main.e9f8526a.chunk.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport styled from 'styled-components';\n\nexport default class extends PureComponent {\n  render() {\n    const { sidebar, children } = this.props;\n    return (\n      <Wrapper>\n        <Sidebar>{sidebar}</Sidebar>\n        <Main>{children}</Main>\n      </Wrapper>\n    );\n  }\n}\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  padding: 20px;\n\n  @media screen and (max-width: 767px) {\n    & > * {\n      width: 100% !important;\n    }\n  }\n\n  @media screen and (min-width: 768px) {\n    padding: 20px calc(50% - 364px);\n  }\n\n  @media screen and (min-width: 1024px) {\n    padding: 20px calc(50% - 492px);\n  }\n`;\n\nconst Sidebar = styled.aside`\n  width: 30%;\n`;\n\nconst Main = styled.main`\n  width: calc(70% - 20px);\n`;\n","import styled from 'styled-components';\n\nexport default styled.img.attrs(({ url }) => ({\n  src: url || '/profilepic.jpg'\n}))`\n  width: 100%;\n  max-width: 180px;\n  border-radius: 10000px;\n  overflow: hidden;\n`;\n","import styled from 'styled-components';\n\nexport default styled.span.attrs(({ theme: { primary } }) => ({\n  highlightColor: primary\n}))`\n  padding: 10px 16px;\n  display: inline-block;\n  margin: 0 8px 8px 0;\n  border: 1px solid;\n  border-radius: 10000px;\n  cursor: pointer;\n  border-color: ${({ selected, highlightColor }) =>\n    !selected ? 'rgba(0, 0, 0, 0.2)' : highlightColor};\n  color: ${({ selected, highlightColor }) =>\n    !selected ? 'rgba(0, 0, 0, 1)' : highlightColor};\n\n  &.small {\n    padding: 0;\n    cursor: default;\n    border: 0;\n    font-size: 0.8em;\n  }\n`;\n","import React, { PureComponent } from 'react';\nimport Pill from './pill';\n\nexport default class extends PureComponent {\n  render() {\n    const { tags, actives, onSelect } = this.props;\n    return (\n      <>\n        {tags.map(tag => (\n          <Pill\n            key={tag}\n            selected={actives.includes(tag)}\n            onClick={() => onSelect(tag)}\n          >\n            {tag}\n          </Pill>\n        ))}\n      </>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { flatten, uniq } from 'lodash-es';\n\nimport Profilepic from './profilepic';\nimport Filter from '../components/filter';\n\nexport default class Sidebar extends Component {\n  render() {\n    const {\n      profile: { description, pictureUrl, displayName, posts },\n      filters,\n      toggleFilter\n    } = this.props;\n\n    const tags = uniq(flatten(posts.map(i => i.tags || [])));\n\n    return (\n      <>\n        <header>\n          <Profilepic url={pictureUrl} />\n          <h2>Hello, my name is</h2>\n          <h1>{displayName}</h1>\n        </header>\n\n        <hr />\n\n        <p>{description}</p>\n\n        <hr />\n\n        {!tags.length ? (\n          false\n        ) : (\n          <>\n            <h1>\n              Skills <em>(select to filter)</em>\n            </h1>\n\n            <Filter\n              tags={tags}\n              actives={Array.from(filters)}\n              onSelect={toggleFilter}\n            />\n          </>\n        )}\n      </>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport styled from 'styled-components';\nimport ReactMarkdown from 'react-markdown';\n\nimport Pill from '../components/pill';\n\nexport default class Block extends PureComponent {\n  render() {\n    const {\n      id,\n      title,\n      subtitle,\n      startDate,\n      endDate,\n      duration,\n      description,\n      tags\n    } = this.props;\n    return (\n      <Box>\n        <h2>\n          <em>{`${startDate} ~ ${endDate} (${duration})`}</em>\n          {title}\n        </h2>\n        <h3>{subtitle}</h3>\n        <ReactMarkdown source={description} />\n        {(tags || []).map(tag => (\n          <Pill className=\"small\" key={`box-${id}-${tag}`}>\n            {tag}\n          </Pill>\n        ))}\n      </Box>\n    );\n  }\n}\n\nconst Box = styled.div`\n  box-sizing: border-box;\n  padding: 10px 20px;\n  margin-bottom: 4%;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 6px;\n\n  & > h2 {\n    font-weight: 500;\n    margin: 0;\n  }\n  & > h3 {\n    margin-top: 0.5em;\n  }\n`;\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { groupBy, forIn, intersection } from 'lodash-es';\n\nimport Block from '../components/block';\n\nexport default class Main extends Component {\n  extractData = data => {\n    const { filters } = this.props;\n    let response = [];\n    let group = groupBy(\n      data.filter(({ tags }) => {\n        let items = Array.from(filters);\n        return !items.length || intersection(tags, items).length;\n      }),\n      'category'\n    );\n    forIn(group, (items, title) => {\n      response.push(<Blocks key={title} {...{ title, items }} />);\n    });\n    return response;\n  };\n\n  render() {\n    const {\n      profile: { posts }\n    } = this.props;\n    return this.extractData(posts);\n  }\n}\n\nconst Blocks = ({ title, items }) => (\n  <>\n    <h1 className=\"sticky\">{title}</h1>\n    <Masonry brakePoints={[350, 500, 750]}>\n      {items.map((item, idx) => (\n        <Block {...item} />\n      ))}\n    </Masonry>\n  </>\n);\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n\n  & > h1 {\n    width: 100%;\n  }\n`;\n\nconst BlockWrapper = styled.div`\n  box-sizing: border-box;\n  width: 100%;\n  @media screen and (min-width: 768px) {\n    width: 48%;\n  }\n`;\n\nclass Masonry extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { columns: 1 };\n    this.onResize = this.onResize.bind(this);\n  }\n  componentDidMount() {\n    this.onResize();\n    window.addEventListener('resize', this.onResize);\n  }\n\n  getColumns(w) {\n    return (\n      this.props.brakePoints.reduceRight((p, c, i) => {\n        return c < w ? p : i;\n      }, this.props.brakePoints.length) + 1\n    );\n  }\n\n  onResize() {\n    const columns = this.getColumns(this.refs.Masonry.offsetWidth);\n    if (columns !== this.state.columns) {\n      this.setState({ columns: columns });\n    }\n  }\n\n  mapChildren() {\n    let col = [];\n    const numC = this.state.columns;\n    for (let i = 0; i < numC; i++) {\n      col.push([]);\n    }\n    return this.props.children.reduce((p, c, i) => {\n      p[i % numC].push(c);\n      return p;\n    }, col);\n  }\n\n  render() {\n    return (\n      <MasonryWrapper>\n        <div className=\"masonry\" ref=\"Masonry\">\n          {this.mapChildren().map((col, ci) => {\n            return (\n              <div className=\"column\" key={ci}>\n                {col.map((child, i) => {\n                  return <div key={i}>{child}</div>;\n                })}\n              </div>\n            );\n          })}\n        </div>\n      </MasonryWrapper>\n    );\n  }\n}\n\nconst MasonryWrapper = styled.div`\n  .masonry {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-content: stretch;\n    width: 100%;\n    margin: auto;\n  }\n  .column {\n    padding-right: 8px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-content: stretch;\n    flex-grow: 1;\n  }\n  .tile {\n    margin: 4px;\n  }\n`;\n","import React, { Component } from 'react';\nimport gql from 'graphql-tag';\nimport { Query } from 'react-apollo';\nimport DateTime from 'luxon/src/datetime';\nimport { distanceInWords, distanceInWordsToNow } from 'date-fns';\n\nexport default class ProfileContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filters: new Set()\n    };\n  }\n\n  toggleFilter = selected => {\n    this.setState(({ filters }) => {\n      const newSet = new Set(filters);\n      if (newSet.has(selected)) newSet.delete(selected);\n      else newSet.add(selected);\n      return {\n        filters: newSet\n      };\n    });\n  };\n\n  render() {\n    const {\n      props: { children },\n      state: { filters },\n      toggleFilter\n    } = this;\n    return (\n      <Query query={query('5c221ae2a498830017416c75')}>\n        {({ loading: isLoading, error, data }) => {\n          // TODO: improve this\n          if (error) {\n            console.log(error);\n            return <h1>Sorry, can't get my infos right now...</h1>;\n          }\n          const profile = parseProfile(data.profile);\n          return children({ isLoading, error, profile, filters, toggleFilter });\n        }}\n      </Query>\n    );\n  }\n}\n\nconst parseProfile = profile => {\n  if (!profile) return {};\n  const {\n    picture: { url: pictureUrl },\n    posts,\n    name: displayName,\n    ...rest\n  } = profile;\n  return {\n    ...rest,\n    displayName,\n    pictureUrl,\n    posts: posts.map(\n      ({\n        category: { title: category },\n        startDate,\n        endDate,\n        current,\n        tags,\n        ...p\n      }) => ({\n        ...p,\n        endDate: current ? 'onwards' : parseDate(endDate),\n        startDate: parseDate(startDate),\n        category,\n        duration: calcDuration(startDate, endDate, current),\n\n        tags: tags.map(({ title }) => title)\n      })\n    )\n  };\n};\n\nconst calcDuration = (start, end, isCurrent) =>\n  isCurrent\n    ? distanceInWordsToNow(new Date(start))\n    : distanceInWords(new Date(start), new Date(end));\n\nconst parseDate = date =>\n  DateTime.fromISO(date).toLocaleString({ month: 'long', year: 'numeric' });\n\nconst query = id => gql`\n{\n  profile(id: \"${id}\") {\n    name\n    description\n    email\n    picture {\n      url\n    }\n    posts(sort: \"startDate:desc\") {\n      title\n      subtitle\n      startDate\n      endDate\n      current\n      description\n      category {\n        title\n      }\n      tags {\n        title\n      }\n    }\n  }\n}\n`;\n","import React, { PureComponent } from 'react';\nimport styled from 'styled-components';\n\nimport Page from './components/page';\nimport Sidebar from './components/sidebar';\nimport Main from './components/main';\n\nimport Profile from './containers/profile';\n\nexport default class ProfilePage extends PureComponent {\n  render() {\n    return (\n      <Profile>\n        {({ isLoading, profile, filters, toggleFilter }) =>\n          isLoading ? (\n            <Loading />\n          ) : (\n            <Page sidebar={<Sidebar {...{ profile, filters, toggleFilter }} />}>\n              <Main {...{ profile, filters, toggleFilter }} />\n            </Page>\n          )\n        }\n      </Profile>\n    );\n  }\n}\n\nconst Loading = styled.h1.attrs(() => ({\n  children: 'Loading...'\n}))`\n  font-size: 20px;\n  padding: 20px;\n  text-align: center;\n`;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport ApolloClient from 'apollo-boost';\nimport { ApolloProvider } from 'react-apollo';\nimport { ThemeProvider } from 'styled-components';\n\nimport ProfilePage from './profile';\nimport LuxonSettings from 'luxon/src/settings';\n\nimport './styles.css';\n\nLuxonSettings.defaultLocale = 'en';\n\nconst client = new ApolloClient({\n  uri: 'https://resumes-api.herokuapp.com/graphql'\n});\n\nconst theme = {\n  primary: 'rgb(255, 150, 0)',\n  secondary: 'rgb(100, 50, 190)'\n};\n\nconst rootElement = document.getElementById('root');\nReactDOM.render(\n  <ApolloProvider client={client}>\n    <ThemeProvider theme={theme}>\n      <ProfilePage />\n    </ThemeProvider>\n  </ApolloProvider>,\n  rootElement\n);\n"],"sourceRoot":""}